{% extends 'base.html' %}

{% block content %}
<div class="flex justify-between items-center mb-4">
    <h1 style="font-size: 1.875rem; font-weight: 700;">Sales Reports</h1>
</div>

<!-- Summary Cards -->
<div class="grid grid-cols-1 md:grid-cols-3 gap-4 mb-6">
    <div class="card p-4">
        <h3 class="text-muted text-sm uppercase">Total Revenue</h3>
        <p style="font-size: 2rem; font-weight: 700; color: var(--primary-color);">${{ total_sales|floatformat:2 }}</p>
    </div>
    <!-- Add more metrics later -->
</div>

<div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
    <!-- Daily Breakdown -->
    <div class="card">
        <h2 class="mb-4 text-lg font-bold">Daily Sales Performance</h2>
        <table class="w-full">
            <thead>
                <tr>
                    <th>Date</th>
                    <th>Transactions</th>
                    <th>Revenue</th>
                </tr>
            </thead>
            <tbody>
                {% for day in daily_sales %}
                <tr>
                    <td>{{ day.date_only|date:"M d, Y" }}</td>
                    <td>{{ day.count }}</td>
                    <td style="font-weight: 600;">${{ day.total|floatformat:2 }}</td>
                </tr>
                {% empty %}
                <tr>
                    <td colspan="3" class="text-center py-4">No data available.</td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>

    <!-- Recent Sales List -->
    <div class="card">
        <h2 class="mb-4 text-lg font-bold">Recent Transactions</h2>
        <div style="max-height: 400px; overflow-y: auto;">
            <table class="w-full">
                <thead>
                    <tr>
                        <th>ID</th>
                        <th>Date</th>
                        <th>User</th>
                        <th>Amount</th>
                    </tr>
                </thead>
                <tbody>
                    {% for sale in sales|slice:":20" %}
                    <tr>
                        <td>#{{ sale.id }}</td>
                        <td class="text-muted" style="font-size: 0.85rem;">{{ sale.date|date:"M d H:i" }}</td>
                        <td>{{ sale.user.username }}</td>
                        <td style="color: green; font-weight: 600;">+${{ sale.total_amount }}</td>
                    </tr>
                    {% empty %}
                    <tr>
                        <td colspan="4" class="text-center py-4">No transactions.</td>
                    </tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>
    </div>
</div>
{% endblock %}